{
  "id": "sys.dnd5e",
  "title": "D&D 5e (Basic)",
  "version": "0.2.0",
  "fields": [
    {
      "key": "name",
      "label": "Name",
      "type": "string",
      "required": true
    },
    {
      "key": "abilities",
      "label": "Abilities",
      "type": "group",
      "children": [
        { "key": "strength", "type": "integer", "minimum": 1, "maximum": 30 },
        { "key": "dexterity", "type": "integer", "minimum": 1, "maximum": 30 },
        { "key": "constitution", "type": "integer", "minimum": 1, "maximum": 30 },
        { "key": "intelligence", "type": "integer", "minimum": 1, "maximum": 30 },
        { "key": "wisdom", "type": "integer", "minimum": 1, "maximum": 30 },
        { "key": "charisma", "type": "integer", "minimum": 1, "maximum": 30 }
      ]
    },
    {
      "key": "skills",
      "label": "Skills",
      "type": "object",
      "children": [],
      "additional": {
        "key": "score",
        "type": "integer",
        "minimum": 0,
        "maximum": 10
      }
    },
    {
      "key": "inventory",
      "label": "Inventory",
      "type": "array",
      "minItems": 0,
      "itemFragment": "common.inventoryItem",
      "item": {
        "key": "item",
        "label": "Inventory Item",
        "type": "group",
        "children": [
          { "key": "name", "label": "Name", "type": "string" },
          { "key": "qty", "label": "Quantity", "type": "integer", "minimum": 0 }
        ]
      }
    },
    {
      "key": "traits",
      "label": "Traits",
      "type": "array",
      "optionsFrom": "traits.core",
      "item": {
        "key": "trait",
        "label": "Trait",
        "type": "string"
      }
    },
    {
      "key": "stance",
      "label": "Stance",
      "type": "string",
      "enum": ["Aggressive", "Defensive", "Neutral"]
    },
    {
      "key": "exhaustion",
      "label": "Exhaustion",
      "type": "integer",
      "minimum": 0,
      "maximum": 6
    }
  ],
  "fragments": [
    {
      "id": "common.inventoryItem",
      "label": "Inventory Item",
      "fields": [
        { "key": "name", "label": "Item Name", "type": "string" },
        { "key": "qty", "label": "Quantity", "type": "integer", "minimum": 0 }
      ]
    }
  ],
  "metadata": [
    {
      "id": "traits.core",
      "label": "Core Traits",
      "type": "list",
      "values": ["brave", "lucky", "alert"]
    }
  ],
  "formulas": [
    { "key": "mod.str", "label": "Strength Modifier", "expr": "floor((@abilities.strength-10)/2)" },
    { "key": "mod.dex", "label": "Dexterity Modifier", "expr": "floor((@abilities.dexterity-10)/2)" }
  ],
  "importers": [
    {
      "id": "dndbeyond_v1",
      "label": "D&D Beyond (JSON)",
      "input": "json",
      "detect": "$.character",
      "map": [
        { "from": "$.character.name", "to": "@name" },
        { "from": "$.character.stats.STR.value", "to": "@abilities.strength", "transform": "int" },
        { "from": "$.character.stats.DEX.value", "to": "@abilities.dexterity", "transform": "int" },
        { "from": "$.character.inventory[*].name", "to": "@inventory", "transform": "asList" }
      ]
    }
  ]
}
