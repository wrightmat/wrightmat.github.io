/* TTRPG Character Sheet & Template Editor - Unified Styles */

/* Reset and Base Styles */
* { 
    box-sizing: border-box; 
}

body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    margin: 0; 
    padding: 0; 
    background: #f8fafc; 
    color: #1f2937; 
    line-height: 1.5;
}

/* Button Styles */
.btn { 
    padding: 0.5rem 1rem; 
    border: none; 
    border-radius: 6px; 
    cursor: pointer; 
    font-size: 0.875rem; 
    font-weight: 500; 
    transition: all 0.2s; 
    display: inline-flex; 
    align-items: center; 
    gap: 0.5rem; 
    white-space: nowrap;
}

.btn-primary { 
    background: #3b82f6; 
    color: white; 
}
.btn-primary:hover { 
    background: #2563eb; 
}

.btn-secondary { 
    background: #6b7280; 
    color: white; 
}
.btn-secondary:hover { 
    background: #4b5563; 
}

.btn-danger { 
    background: #ef4444; 
    color: white; 
}
.btn-danger:hover { 
    background: #dc2626; 
}

.btn-success { 
    background: #059669; 
    color: white; 
}
.btn-success:hover { 
    background: #047857; 
}

.btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
    border-color: #e5e7eb !important;
}

.btn:disabled:hover {
    opacity: 0.4;
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
    border-color: #e5e7eb !important;
    transform: none;
}

.btn-primary:disabled,
.btn-secondary:disabled,
.btn-danger:disabled,
.btn-success:disabled {
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
    border-color: #e5e7eb !important;
}

.btn-small {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
}

.btn-full-width {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.btn-with-margin {
    margin-bottom: 0.5rem;
}

/* Form Controls */
.form-group { 
    margin-bottom: 1rem; 
}

.form-group label { 
    display: block; 
    font-size: 0.875rem; 
    font-weight: 500; 
    color: #374151; 
    margin-bottom: 0.25rem; 
}

.form-control { 
    width: 100%; 
    padding: 0.5rem; 
    border: 1px solid #a7aaaf;
    border-radius: 6px;
    font-size: 0.875rem;
    transition: border-color 0.2s;
}

.form-control:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-control:disabled {
    width: 100%; 
    padding: 0.5rem; 
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 0.875rem;
    transition: border-color 0.2s;
    background-color: inherit !important;
    color: inherit !important;
    opacity: 1 !important;
    cursor: not-allowed;
}

.form-control[readonly] {
    background-color: #f3f4f6 !important;
    border-color: #d1d5db !important;
    color: #6b7280 !important;
    cursor: default;
}

.form-control[style*="color:"] {
    color: inherit !important;
}

/* Layout Utilities */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }
.gap-4 { gap: 1rem; }

/* Grid Layouts */
.grid-layout { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
    gap: 1rem; 
}

.horizontal-layout { 
    display: flex; 
    gap: 1rem; 
    flex-wrap: wrap; 
}

.vertical-layout { 
    display: flex; 
    flex-direction: column; 
    gap: 1rem; 
}

/* Template Editor Specific Styles */
.template-layout-indicator {
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.template-layout-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.template-layout-title {
    margin: 0;
    font-weight: 600;
    color: #374151;
}

.tab-drop-zone {
    min-height: 200px;
    border: 2px dashed #d1d5db;
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
}

.tab-drop-zone.drag-over {
    border-color: #3b82f6;
    background: #eff6ff;
}

.element-label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.element-fieldset {
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 1rem;
}

.element-legend {
    font-weight: 600;
    padding: 0 0.5rem;
}

.element-heading {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: #374151;
    pointer-events: none;
}

.element-divider {
    border: none;
    border-top: 2px solid #e5e7eb;
    margin: 1rem 0;
    pointer-events: none;
}

/* Property panel labels */
.property-label {
    color: #474e59;
}

.property-group-title {
    color: #9ca3af;
}

.appearance-group {
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 0;
    overflow: hidden;
    margin-bottom: 1.5rem;
}

.property-group-header {
    background: #f8fafc;
    padding: 0.75rem;
    cursor: pointer;
    user-select: none;
    border-bottom: 1px solid #e5e7eb;
    transition: background-color 0.2s ease;
}

.property-group-header:hover {
    background: #f3f4f6;
}

.collapsible-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #6b7280;
}

.appearance-content {
    padding: 0.75rem;
}

.color-property-group {
    margin-bottom: 1rem;
}

.color-property-group:last-child {
    margin-bottom: 0;
}

.color-property-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.color-value-display {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    color: #6b7280;
}

.color-swatch {
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 3px;
    border: 1px solid #d1d5db;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    flex-shrink: 0;
}

.color-value {
    font-family: monospace;
    max-width: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.color-quick-picks {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    flex-wrap: wrap;
}

.color-preset-mini {
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 3px;
    cursor: pointer;
    border: 2px solid #e5e7eb;
    transition: all 0.2s ease;
    position: relative;
    flex-shrink: 0;
}

.color-preset-mini:hover {
    transform: scale(1.1);
    border-color: #3b82f6;
}

.color-preset-mini.selected {
    border-color: #3b82f6;
}

.color-preset-mini.selected::after {
    content: 'âœ“';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-weight: bold;
    font-size: 0.625rem;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);
}

.color-input-mini {
    width: 1.5rem;
    height: 1.5rem;
    border: 1px solid #d1d5db;
    border-radius: 3px;
    cursor: pointer;
    padding: 0;
    flex-shrink: 0;
}

.color-input-mini::-webkit-color-swatch-wrapper {
    padding: 0;
}

.color-input-mini::-webkit-color-swatch {
    border: none;
    border-radius: 3px;
}

.btn-clear-mini {
    width: 1.5rem;
    height: 1.5rem;
    border: 1px solid #d1d5db;
    border-radius: 3px;
    cursor: pointer;
    background: #f9fafb;
    color: #6b7280;
    font-size: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.btn-clear-mini:hover {
    background: #ef4444;
    color: white;
    border-color: #dc2626;
}

.character-editor-container {
    display: grid;
    grid-template-columns: 300px 1fr 350px;
    grid-template-rows: 60px 1fr;
    height: 100vh;
    gap: 1px;
    background: #e5e7eb;
}

.character-editor-container.left-collapsed {
    grid-template-columns: 0 1fr 350px;
}

.character-editor-container.right-collapsed {
    grid-template-columns: 300px 1fr 0;
}

.character-editor-container.both-collapsed {
    grid-template-columns: 0 1fr 0;
}

.left-pane {
    background: white;
    padding: 1rem;
    overflow-y: auto;
    border-right: 1px solid #e5e7eb;
    transition: all 0.3s ease;
}

.left-pane.collapsed {
    width: 0;
    padding: 0;
    overflow: hidden;
}

.right-pane {
    background: white;
    padding: 1rem;
    height: 100%;
    overflow-y: auto;
    border-left: 1px solid #e5e7eb;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.right-pane.collapsed {
    width: 0;
    padding: 0;
    overflow: hidden;
}

.main-canvas {
    background: white;
    overflow: auto;
    position: relative;
}

.pane-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb;
}

.pane-title {
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
    margin: 0;
}

.pane-toggle {
    background: none;
    border: none;
    color: #6b7280;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    margin-left: auto;
}

.pane-toggle:hover {
    color: #374151;
    background: #f3f4f6;
}

.data-content {
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 0.75rem;
    background: #fafafa;
    border-radius: 6px;
    padding: 1rem;
    overflow: auto;
}

.data-content pre {
    margin: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
}

.toolbar-toggle {
    background: none;
    border: none;
    color: #9ca3af;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.toolbar-toggle:hover {
    color: #f9fafb;
    background: #374151;
}

/* Character Sheet Specific Styles */
.character-sheet-body { 
    height: 100vh; 
    overflow: hidden; 
}

.sheet-container { 
    display: flex; 
    flex-direction: column; 
    height: 100vh; 
    max-width: 1400px; 
    margin: 0 auto; 
    background: white; 
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); 
}

.sheet-toolbar { 
    background: #1f2937; 
    color: white; 
    padding: 1rem 1.5rem; 
    display: flex; 
    align-items: center; 
    gap: 1rem; 
    border-bottom: 1px solid #374151; 
    flex-shrink: 0;
}

.sheet-toolbar h1 { 
    margin: 0; 
    font-size: 1.5rem; 
    font-weight: 600; 
    color: #60a5fa;
}

.toolbar-actions { 
    margin-left: auto; 
    display: flex; 
    gap: 0.75rem; 
    align-items: center; 
    flex-wrap: wrap;
}

.toolbar-actions .form-control { 
    width: auto;
    min-width: 150px;
    background: white;
}

/* Sheet Content */
.sheet-content { 
    flex: 1; 
    padding: 2rem; 
    overflow-y: auto; 
    background: #f8fafc;
}

/* Data Panel */
.data-panel { 
    position: fixed; 
    top: 1rem; 
    right: 1rem; 
    width: 350px; 
    max-height: calc(100vh - 2rem); 
    background: #1f2937; 
    color: #f9fafb; 
    border-radius: 8px; 
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); 
    display: flex; 
    flex-direction: column; 
    z-index: 1000; 
    transition: all 0.3s ease; 
}

.data-panel.collapsed { 
    width: auto; 
    height: auto; 
    max-height: none; 
}

.data-panel-header { 
    padding: 1rem; 
    background: #111827; 
    border-bottom: 1px solid #374151; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-radius: 8px 8px 0 0; 
}

.data-panel.collapsed .data-panel-header { 
    border-radius: 8px; 
}

.data-panel-title { 
    font-size: 0.875rem; 
    font-weight: 600; 
    color: #60a5fa; 
    margin: 0; 
}

.toggle-btn { 
    background: none; 
    border: none; 
    color: #9ca3af; 
    cursor: pointer; 
    padding: 0.25rem; 
    border-radius: 4px; 
    transition: all 0.2s ease; 
    font-size: 1rem; 
}

.toggle-btn:hover { 
    color: #f9fafb; 
    background: #374151; 
}

.data-panel-content { 
    flex: 1; 
    padding: 1rem; 
    overflow-y: auto; 
    font-family: 'Courier New', monospace; 
    font-size: 0.75rem; 
}

.data-panel.collapsed .data-panel-content { 
    display: none; 
}

/* Field Styles */
.field-group { 
    margin-bottom: 1.5rem; 
}

.field-label { 
    display: block; 
    font-weight: 600; 
    margin-bottom: 0.5rem; 
    color: #374151; 
    font-size: 0.875rem; 
}

.textarea-control { 
    min-height: 80px; 
    resize: vertical; 
}

.checkbox-label { 
    display: flex; 
    align-items: center; 
    gap: 0.5rem; 
    cursor: pointer;
}

.checkbox-input { 
    width: 1.25rem; 
    height: 1.25rem; 
}

/* Group Styles */
.group-fieldset { 
    border: 2px solid #e5e7eb; 
    border-radius: 8px; 
    padding: 1.5rem; 
    margin-bottom: 2rem; 
    background: white; 
}

.group-legend { 
    font-size: 1rem; 
    font-weight: 600; 
    color: #374151; 
    padding: 0 0.5rem; 
    background: white;
}

/* Ability Block Styles */
.ability-block { 
    background: white; 
    border: 2px solid #e5e7eb; 
    border-radius: 8px; 
    padding: 1rem; 
    text-align: center; 
    transition: all 0.2s ease; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
}

.ability-block:hover { 
    border-color: #3b82f6; 
    transform: translateY(-1px); 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
}

.ability-label { 
    font-size: 0.75rem; 
    font-weight: 600; 
    text-transform: uppercase; 
    letter-spacing: 0.05em; 
    color: #374151; 
    margin-bottom: 0.5rem; 
}

.ability-score { 
    text-align: center; 
    font-size: 1.25rem; 
    font-weight: 600; 
    margin-bottom: 0.5rem; 
    width: 80px; 
    border: 1px solid #d1d5db;
    border-radius: 4px;
    padding: 0.5rem;
}

.ability-modifier { 
    font-size: 0.875rem; 
    font-weight: 600; 
    background: #f3f4f6 !important; 
    border: 1px solid #e5e7eb !important; 
    border-radius: 4px; 
    padding: 0.25rem 0.5rem; 
    color: #6b7280 !important; 
    text-align: center; 
    width: 50px; 
}

/* Array Styles */
.array-container { 
    background: white; 
    border: 1px solid #e5e7eb; 
    border-radius: 8px; 
    overflow: hidden; 
}

.array-header { 
    display: grid; 
    grid-template-columns: 2fr 1fr 1fr 3fr; 
    gap: 1rem; 
    padding: 0.75rem 1rem; 
    background: #f8fafc; 
    border-bottom: 1px solid #e5e7eb; 
    font-weight: 600; 
    font-size: 0.875rem; 
    color: #374151; 
}

.array-item { 
    display: grid; 
    grid-template-columns: 2fr 1fr 1fr 3fr; 
    gap: 1rem; 
    padding: 1rem; 
    border-bottom: 1px solid #f3f4f6; 
    transition: background 0.2s; 
}

.array-item:hover { 
    background: #f8fafc; 
}

.array-item:last-child { 
    border-bottom: none; 
}

.array-empty { 
    text-align: center; 
    color: #9ca3af; 
    padding: 2rem; 
    font-style: italic; 
}

/* Enhanced Array Styles */
.array-header-section {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

/* Table Style */
.array-style-table .array-table {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
}

.array-table-header {
    display: grid;
    grid-template-columns: auto 2fr 1fr 1fr 3fr auto;
    gap: 0.5rem;
    padding: 0.75rem;
    background: #f8fafc;
    border-bottom: 1px solid #e5e7eb;
    font-weight: 600;
    font-size: 0.875rem;
    color: #374151;
}

.array-table-row {
    display: grid;
    grid-template-columns: auto 2fr 1fr 1fr 3fr auto;
    gap: 0.5rem;
    padding: 0.75rem;
    border-bottom: 1px solid #f3f4f6;
    transition: background 0.2s;
    align-items: center;
}

.array-table-row:hover {
    background: #f8fafc;
}

.array-table-row:last-child {
    border-bottom: none;
}

.array-input {
    margin: 0;
    padding: 0.375rem 0.5rem;
    font-size: 0.875rem;
}

/* Cards Style */
.array-style-cards .array-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
}

.array-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.array-card:hover {
    border-color: #3b82f6;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.array-card-header {
    background: #f8fafc;
    padding: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.array-card-title {
    flex: 1;
    font-weight: 600;
    margin: 0;
    padding: 0.25rem 0.5rem;
    border: 1px solid transparent;
    background: transparent;
    font-size: 0.875rem;
}

.array-card-title:focus {
    border-color: #3b82f6;
    background: white;
}

.array-card-content {
    padding: 1rem;
}

.array-card-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.array-card-row:last-child {
    margin-bottom: 0;
}

.array-card-row label {
    min-width: 80px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
}

.array-card-row .form-control {
    flex: 1;
    padding: 0.375rem 0.5rem;
    font-size: 0.875rem;
}

.array-card-description {
    min-height: 60px;
    resize: vertical;
}

/* Compact Style */
.array-style-compact .array-compact {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
}

.array-compact-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #f3f4f6;
    transition: background 0.2s;
}

.array-compact-item:hover {
    background: #f8fafc;
}

.array-compact-item:last-child {
    border-bottom: none;
}

.array-compact-content {
    flex: 1;
    position: relative;
}

.array-compact-name {
    font-weight: 500;
    color: #374151;
    cursor: pointer;
}

.array-compact-name:hover {
    color: #3b82f6;
}

.array-compact-input {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    margin: 0;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
}

/* Drag and Drop Styles */
.array-drag-column,
.array-actions-column {
    width: 40px;
    text-align: center;
}

.array-drag-handle {
    color: #9ca3af;
    cursor: grab;
    padding: 0.25rem;
    user-select: none;
    text-align: center;
    font-size: 0.875rem;
}

.array-drag-handle:hover {
    color: #6b7280;
}

.draggable-array-item {
    cursor: move;
}

.draggable-array-item:active {
    cursor: grabbing;
}

.draggable-array-item.drag-over {
    background: #eff6ff !important;
    border-color: #3b82f6 !important;
}

.array-item-actions {
    display: flex;
    gap: 0.25rem;
    align-items: center;
}

/* Preview Styles */
.array-cards-preview {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.array-card-preview {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    overflow: hidden;
}

.array-card-header {
    background: #f8fafc;
    padding: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    border-bottom: 1px solid #e5e7eb;
}

.array-card-content {
    padding: 0.75rem 0.5rem;
    font-size: 0.75rem;
    color: #6b7280;
}

.array-compact-preview {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 0.5rem 0;
}

.array-compact-item {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
    color: #6b7280;
}

.array-table-preview {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    overflow: hidden;
}

.array-table-preview .array-table-header {
    background: #f8fafc;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    padding: 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-bottom: 1px solid #e5e7eb;
}

.array-table-preview .array-table-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    padding: 0.5rem;
    font-size: 0.75rem;
    color: #6b7280;
}

@media (max-width: 768px) {
    .array-table-header,
    .array-table-row {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }
    
    .array-table-header {
        display: none;
    }
    
    .array-cards {
        grid-template-columns: 1fr;
    }
    
    .array-card-row {
        flex-direction: column;
        align-items: stretch;
        gap: 0.25rem;
    }
    
    .array-card-row label {
        min-width: auto;
    }
}

/* Tab Styles */
.tab-nav { 
    display: flex; 
    background: #f3f4f6; 
    border-radius: 8px 8px 0 0; 
    overflow: hidden; 
    margin-bottom: 0; 
    border: 1px solid #e5e7eb;
    border-bottom: none;
}

.tab-button { 
    flex: 1; 
    padding: 1rem 1.5rem; 
    background: transparent; 
    border: none; 
    border-bottom: 3px solid transparent; 
    cursor: pointer; 
    font-weight: 600; 
    font-size: 0.875rem; 
    color: #6b7280; 
    transition: all 0.2s ease; 
}

.tab-button:hover { 
    background: #e5e7eb; 
    color: #374151; 
}

.tab-button.active { 
    background: white; 
    color: #3b82f6; 
    border-bottom-color: #3b82f6; 
}

.tab-content { 
    display: none; 
    background: white; 
    border: 1px solid #e5e7eb; 
    border-top: none; 
    border-radius: 0 0 8px 8px; 
    padding: 2rem; 
}

.tab-content.active { 
    display: block; 
}

.tab-wrapper {
    position: relative;
    display: inline-block;
}

.tab-wrapper.drop-before::before {
    content: '';
    position: absolute;
    left: -2px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: #3b82f6;
    z-index: 10;
}

.tab-wrapper.drop-after::after {
    content: '';
    position: absolute;
    right: -2px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: #3b82f6;
    z-index: 10;
}

.tab-rename-input {
    background: white;
    border: 1px solid #3b82f6;
    border-radius: 4px;
    padding: 2px 6px;
    font-size: inherit;
    font-family: inherit;
    min-width: 80px;
}

.tab-wrapper[draggable="true"] {
    cursor: move;
}

.tab-wrapper[draggable="true"]:hover .tab-button {
    background: rgba(59, 130, 246, 0.1);
}

/* Label and Divider Styles */
.label-heading { 
    margin: 0 0 1rem 0; 
    font-size: 1.125rem; 
    font-weight: 600; 
    color: #374151; 
}

.divider-line { 
    border: none; 
    border-top: 2px solid #e5e7eb; 
    margin: 1.5rem 0; 
}

/* Template Editor Specific Styles */
.template-editor body { 
    height: 100vh; 
    overflow: hidden; 
}

.editor-container { 
    display: grid; 
    grid-template-columns: 300px 1fr 350px; 
    grid-template-rows: 60px 1fr; 
    height: 100vh; 
    gap: 1px; 
    background: #e5e7eb; 
}

.toolbar { 
    grid-column: 1 / -1; 
    background: #1f2937; 
    color: white; 
    padding: 0 1rem; 
    display: flex; 
    align-items: center; 
    gap: 1rem; 
}

.toolbar h1 { 
    margin: 0; 
    font-size: 1.25rem; 
    font-weight: 600; 
    color: #60a5fa;
}

.toolbar-actions { 
    margin-left: auto; 
    display: flex; 
    gap: 0.5rem; 
    align-items: center; 
    flex-wrap: wrap;
}

.palette { 
    background: white; 
    padding: 1rem; 
    overflow-y: auto; 
    border-right: 1px solid #e5e7eb; 
}

.palette h3 { 
    margin: 0 0 1rem 0; 
    font-size: 1rem; 
    font-weight: 600; 
    color: #374151; 
    border-bottom: 2px solid #e5e7eb; 
    padding-bottom: 0.5rem; 
}

.element-group { 
    margin-bottom: 1.5rem; 
}

.element-group h4 { 
    margin: 0 0 0.5rem 0; 
    font-size: 0.875rem; 
    font-weight: 600; 
    color: #6b7280; 
    text-transform: uppercase; 
    letter-spacing: 0.05em; 
}

.draggable-element { 
    background: #f8fafc; 
    border: 2px solid #e5e7eb; 
    border-radius: 8px; 
    padding: 0.75rem; 
    margin-bottom: 0.5rem; 
    cursor: grab; 
    transition: all 0.2s; 
    display: flex; 
    align-items: center; 
    gap: 0.5rem; 
}

.draggable-element:hover { 
    border-color: #3b82f6; 
    background: #eff6ff; 
    transform: translateX(2px); 
}

.draggable-element:active { 
    cursor: grabbing; 
}

.element-icon { 
    font-size: 1.2rem; 
    color: #6b7280; 
}

.element-name { 
    font-size: 0.875rem; 
    font-weight: 500; 
    color: #374151; 
}

.canvas { 
    background: white; 
    overflow: auto; 
    position: relative; 
}

.canvas-content { 
    padding: 2rem; 
    min-height: 100%; 
}

.empty-state { 
    text-align: center; 
    padding: 4rem 2rem; 
    color: #6b7280; 
}

.empty-state h2 { 
    margin: 0 0 1rem 0; 
    color: #374151; 
    font-size: 1.5rem; 
}

.empty-state p { 
    margin: 0 0 2rem 0; 
    font-size: 1rem; 
}

.empty-state-actions { 
    display: flex; 
    justify-content: center; 
    gap: 1rem; 
}

.empty-state-small { 
    text-align: center; 
    color: #9ca3af; 
    padding: 2rem; 
    font-size: 0.875rem; 
}

.template-header { 
    margin-bottom: 2rem; 
    display: flex; 
    align-items: center; 
    gap: 1rem; 
}

.template-title-input { 
    font-size: 1.5rem; 
    font-weight: 600; 
    border: 2px solid transparent; 
    background: transparent; 
    padding: 0.5rem; 
    border-radius: 6px; 
    transition: all 0.2s; 
    flex: 1; 
}

.template-title-input:focus { 
    border-color: #3b82f6; 
    background: white; 
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); 
}

.modified-indicator { 
    color: #f59e0b; 
    font-size: 0.875rem; 
    font-weight: 500; 
}

.drop-zone {
    position: relative;
    min-height: 50px;
}

.element-wrapper {
    position: relative;
    margin: 0.25rem 0;
}

.final-placeholder {
    margin-top: 0.5rem;
}

.group-drop-zone {
    padding: 0.5rem;
    border-radius: 6px;
}

.group-drop-zone.drag-over {
    background: #eff6ff;
    border: 2px dashed #3b82f6;
}

.container-column {
    border: 1px dashed #d1d5db;
    border-radius: 6px;
    padding: 0.5rem;
    background: #fafafa;
    transition: all 0.2s ease;
    cursor: pointer;
}

.container-column:hover {
    border-color: #3b82f6;
    background: #f0f9ff;
    transform: translateY(-1px);
}

.container-column.drag-over {
    border-color: #3b82f6;
    background: #eff6ff;
    border-style: solid;
    border-width: 2px;
}

.container-column-content {
    min-height: 50px;
    position: relative;
}

.container-wrapper.container-columns {
    display: grid;
    align-items: start;
}

.container-wrapper.container-cols-2 {
    grid-template-columns: 1fr 1fr;
}

.container-wrapper.container-cols-3 {
    grid-template-columns: 1fr 1fr 1fr;
}

.container-wrapper.container-cols-4 {
    grid-template-columns: 1fr 1fr 1fr 1fr;
}

.container-wrapper.container-rows {
    display: flex;
    flex-direction: column;
}

.container-wrapper.container-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

.container-wrapper.container-flexbox {
    display: flex;
    flex-wrap: wrap;
}

.container-column-header {
    font-size: 0.75rem;
    font-weight: 600;
    color: #6b7280;
    text-align: center;
    padding: 0.25rem;
    background: #f3f4f6;
    border-radius: 3px;
    margin-bottom: 0.5rem;
}

.container-column-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Make columns stack on mobile */
@media (max-width: 768px) {
    .container-wrapper.container-columns {
        grid-template-columns: 1fr !important;
    }
}

.drop-zone-empty {
    text-align: center;
    color: #9ca3af;
    padding: 1rem;
    font-size: 0.875rem;
    border: 1px dashed #d1d5db;
    border-radius: 4px;
    background: white;
    margin: 0.25rem 0;
    transition: all 0.2s ease;
}

.drop-zone-empty:hover {
    border-color: #3b82f6;
    color: #3b82f6;
    background: #eff6ff;
}

.form-element { 
    background: #f8fafc; 
    border: 2px solid #e5e7eb; 
    border-radius: 8px; 
    padding: 1rem; 
    margin-bottom: 1rem; 
    position: relative; 
    transition: all 0.2s; 
}

.form-element:hover { 
    border-color: #3b82f6; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
}

.form-element.selected { 
    border-color: #3b82f6; 
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); 
}

.element-controls { 
    position: absolute; 
    top: -12px; 
    right: -12px; 
    display: flex; 
    gap: 0.25rem; 
    opacity: 0; 
    transition: opacity 0.2s; 
}

.form-element:hover .element-controls { 
    opacity: 1; 
}

.control-btn { 
    width: 28px; 
    height: 28px; 
    border: none; 
    border-radius: 4px; 
    cursor: pointer; 
    font-size: 0.75rem; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    background: white; 
    color: #6b7280; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
    transition: all 0.2s; 
}

.control-btn:hover { 
    background: #f3f4f6; 
    color: #374151; 
}

.control-btn.delete { 
    background: #ef4444; 
    color: white; 
}

.control-btn.delete:hover { 
    background: #dc2626; 
}

.control-layout-horizontal {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.control-layout-compact {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    text-align: center;
    min-width: 80px;
}

.control-layout-compact .field-label {
    font-size: 0.75rem;
    margin-bottom: 0.25rem;
}

.control-layout-compact .form-control {
    width: 80px;
    text-align: center;
}

.control-horizontal-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.horizontal-label {
    margin-bottom: 0;
    white-space: nowrap;
    flex-shrink: 0;
}

.label-align-center {
    text-align: center;
}

.label-align-right {
    text-align: right;
}

.control-input-wrapper {
    display: flex;
}

.input-wrapper-center {
    justify-content: center;
}

.input-wrapper-right {
    justify-content: flex-end;
}

.input-wrapper-left {
    justify-content: flex-start;
}

.checkbox-label.label-align-center {
    justify-content: center;
}

.checkbox-label.label-align-right {
    justify-content: flex-end;
}

.properties-panel { 
    background: white; 
    padding: 1rem; 
    overflow-y: auto; 
    border-left: 1px solid #e5e7eb; 
}

.properties-panel h3 { 
    margin: 0 0 1rem 0; 
    font-size: 1rem; 
    font-weight: 600; 
    color: #374151; 
    border-bottom: 2px solid #e5e7eb; 
    padding-bottom: 0.5rem; 
}

.property-group { 
    margin-bottom: 1.5rem; 
}

.property-group h4 { 
    margin: 0 0 0.5rem 0; 
    font-size: 0.875rem; 
    font-weight: 600; 
    color: #6b7280; 
}

.tab-container { 
    background: #f8fafc; 
    border: 2px solid #e5e7eb; 
    border-radius: 8px; 
    margin-bottom: 1rem; 
}

.tab-header { 
    display: flex; 
    background: #f3f4f6; 
    border-bottom: 1px solid #e5e7eb; 
    border-radius: 6px 6px 0 0; 
}

.drag-placeholder { 
    height: 4px; 
    background: #3b82f6; 
    border-radius: 2px; 
    margin: 0.5rem 0; 
    opacity: 0; 
    transition: opacity 0.2s; 
}

.drag-placeholder.show { 
    opacity: 1; 
}

/* Modal Styles */
.modal-overlay { 
    position: fixed; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    background: rgba(0, 0, 0, 0.5); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    z-index: 1000; 
}

.modal { 
    background: white; 
    border-radius: 12px; 
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); 
    max-width: 500px; 
    width: 90%; 
    max-height: 90vh; 
    overflow-y: auto; 
}

.modal-header { 
    padding: 1.5rem; 
    border-bottom: 1px solid #e5e7eb; 
}

.modal-header h3 { 
    margin: 0; 
    font-size: 1.25rem; 
    font-weight: 600; 
    color: #1f2937; 
}

.modal-body { 
    padding: 1.5rem; 
}

.modal-footer { 
    padding: 1.5rem; 
    border-top: 1px solid #e5e7eb; 
    display: flex; 
    gap: 0.75rem; 
    justify-content: flex-end; 
}

/* Responsive Design */
@media (max-width: 1024px) { 
    .editor-container { 
        grid-template-columns: 250px 1fr; 
    } 
    
    .properties-panel { 
        position: fixed; 
        top: 60px; 
        right: -350px; 
        width: 350px; 
        height: calc(100vh - 60px); 
        z-index: 1000; 
        transition: right 0.3s; 
        box-shadow: -4px 0 8px rgba(0, 0, 0, 0.1); 
    } 
    
    .properties-panel.show { 
        right: 0; 
    }

    .character-editor-container {
        grid-template-columns: 250px 1fr 300px;
    }
    
    .character-editor-container.left-collapsed {
        grid-template-columns: 0 1fr 300px;
    }
    
    .character-editor-container.right-collapsed {
        grid-template-columns: 250px 1fr 0;
    }
}

@media (max-width: 768px) { 
    .data-panel { 
        position: fixed; 
        top: 1rem; 
        right: 1rem; 
        left: 1rem; 
        width: auto; 
        max-height: 300px; 
    } 
    
    .toolbar-actions { 
        flex-direction: column; 
        align-items: stretch; 
        gap: 0.5rem; 
    }
    
    .toolbar-actions .form-control { 
        min-width: auto; 
    }
    
    .grid-layout { 
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
    } 
    
    .horizontal-layout { 
        flex-direction: column; 
    }
    
    .tab-nav { 
        flex-wrap: wrap; 
    } 
    
    .tab-button { 
        flex: 1 1 auto; 
        min-width: 120px; 
    } 
    
    .array-header, 
    .array-item { 
        grid-template-columns: 1fr; 
        gap: 0.5rem; 
    } 
    
    .array-header { 
        display: none; 
    }

    .character-editor-container {
        grid-template-columns: 1fr;
        grid-template-rows: 60px 1fr;
    }
    
    .left-pane,
    .right-pane {
        position: fixed;
        top: 60px;
        height: calc(100vh - 60px);
        z-index: 1000;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .left-pane {
        left: 0;
        width: 300px;
    }
    
    .right-pane {
        right: 0;
        width: 350px;
        transform: translateX(100%);
    }
    
    .left-pane.show {
        transform: translateX(0);
    }
    
    .right-pane.show {
        transform: translateX(0);
    }
}

/* Utility Classes */
.text-sm { font-size: 0.875rem; }
.text-xs { font-size: 0.75rem; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.text-gray-500 { color: #6b7280; }
.text-gray-700 { color: #374151; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-4 { margin-bottom: 1rem; }
.p-2 { padding: 0.5rem; }
.p-4 { padding: 1rem; }

/* Loading Spinner */
.spinner { 
    display: inline-block; 
    width: 20px; 
    height: 20px; 
    border: 2px solid #e5e7eb; 
    border-radius: 50%; 
    border-top-color: #3b82f6; 
    animation: spin 1s ease-in-out infinite; 
}

@keyframes spin { 
    to { transform: rotate(360deg); } 
}

/* Tooltip */
.tooltip { 
    position: relative; 
}

.tooltip::after { 
    content: attr(data-tooltip); 
    position: absolute; 
    bottom: 100%; 
    left: 50%; 
    transform: translateX(-50%); 
    background: #1f2937; 
    color: white; 
    padding: 0.25rem 0.5rem; 
    border-radius: 4px; 
    font-size: 0.75rem; 
    white-space: nowrap; 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.2s; 
    z-index: 1000; 
    margin-bottom: 4px; 
}

.tooltip:hover::after { 
    opacity: 1; 
}

/* Progress Track Styles */
.progress-track {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin: 1rem 0;
}

.progress-track-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
}

/* Linear Progress Track */
.progress-linear {
    display: flex;
    gap: 3px;
    align-items: center;
    flex-wrap: wrap;
}

.progress-segment {
    width: 24px;
    height: 24px;
    border: 2px solid #d1d5db;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    position: relative;
}

.progress-segment.filled {
    background: #3b82f6;
    border-color: #2563eb;
    color: white;
}

.progress-segment:hover {
    border-color: #3b82f6;
    transform: scale(1.05);
}

/* Circular Progress Track (Clock) */
.progress-circular {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 0 auto;
}

.progress-circle {
    width: 100%;
    height: 100%;
    border: 2px solid #e5e7eb;
    border-radius: 50%;
    position: relative;
    background: white;
}

.progress-circle-segment {
    position: absolute;
    width: 16px;
    height: 16px;
    border: 2px solid #d1d5db;
    border-radius: 50%;
    background: white;
    cursor: pointer;
    transition: all 0.2s ease;
    transform: translate(-50%, -50%);
}

.progress-circle-segment.filled {
    background: #3b82f6;
    border-color: #2563eb;
}

.progress-circle-segment:hover {
    transform: translate(-50%, -50%) scale(1.15);
    border-color: #3b82f6;
}

/* Progress track counter */
.progress-track-counter {
    font-size: 0.75rem;
    color: #6b7280;
    text-align: center;
    margin-top: 0.25rem;
}

.properties-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  max-height: calc(1000vh - 60px - 60px); /* toolbar + pane-header height */
}

.character-image-placeholder {
    width: 100%;
    height: 100%;
    padding: 1rem;
    text-align: center;
    color: #9ca3af;
    font-size: 0.875rem;
    background: #f9fafb;
    border: 2px dashed #d1d5db;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    min-height: 60px;
}

.character-image-placeholder:hover {
    border-color: #3b82f6;
    background: #eff6ff;
    transform: translateY(-1px);
}

.character-image-placeholder-icon {
    font-size: 1.5rem;
    color: #d1d5db;
    transition: all 0.2s ease;
}

.character-image-placeholder:hover .character-image-placeholder-icon {
    color: #3b82f6;
    transform: scale(1.1);
}

.image-upload-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: inherit; /* Inherit border radius from container */
    z-index: 5; /* Keep it below the controls but above the image */
}

.character-image-container:hover .image-upload-overlay {
    opacity: 1;
}

.character-image-container {
    position: relative;
    display: inline-block;
    transition: all 0.2s ease;
    overflow: hidden;
    border: 2px solid #e5e7eb;
}

.image-controls {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    gap: 0.25rem;
    opacity: 0;
    transition: opacity 0.2s ease;
    z-index: 10; /* Higher than overlay */
}

.image-control-btn {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    transition: all 0.2s;
}

.image-control-btn:hover {
    background: rgba(0, 0, 0, 0.9);
}

.image-control-btn.delete {
    background: rgba(239, 68, 68, 0.9);
}

.image-control-btn.delete:hover {
    background: rgba(220, 38, 38, 0.95);
}

/* Rich Text Editor Styles */
.rich-text-editor {
    border: 1px solid #d1d5db;
    border-radius: 6px;
    overflow: hidden;
}

.rich-text-editor .toastui-editor-defaultUI {
    border: none;
}

.rich-text-editor .toastui-editor-main {
    background: white;
}

@media (max-width: 768px) {
    .rich-text-editor {
        font-size: 0.875rem;
    }
    
    .rich-text-editor .toastui-editor-toolbar {
        flex-wrap: wrap;
    }
}

.view-mode .rich-text-editor {
    pointer-events: none; /* Completely disable interaction in view mode */
}

.toastui-editor-viewer {
    background: #f9fafb;
}

.toastui-editor-viewer .toastui-editor-contents {
    padding: 1rem;
    background: transparent !important;
}

/* Multi-state Toggle Element Styles */
.multi-state-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0.25rem 0;
}

.multi-state-control {
    width: 20px;
    height: 20px;
    border: 2px solid #d1d5db;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    position: relative;
    flex-shrink: 0;
}

.multi-state-control.circle {
    border-radius: 50%;
}

.multi-state-control.square {
    border-radius: 3px;
}

.multi-state-control.diamond {
    border-radius: 2px;
    transform: rotate(45deg);
}

.multi-state-control.diamond .state-indicator {
    transform: rotate(-45deg);
}

.multi-state-control.small {
    width: 16px;
    height: 16px;
}

.multi-state-control.medium {
    width: 20px;
    height: 20px;
}

.multi-state-control.large {
    width: 24px;
    height: 24px;
}

.multi-state-control.state-0 {
    background: white;
    border-color: #d1d5db;
}

.multi-state-control.state-1 {
    background: #3b82f6;
    border-color: #2563eb;
}

.multi-state-control.state-2 {
    background: #3b82f6;
    border-color: #2563eb;
    box-shadow: inset 0 0 0 2px white, inset 0 0 0 4px #3b82f6;
}

.multi-state-control.state-3 {
    background: linear-gradient(45deg, #3b82f6 50%, #f59e0b 50%);
    border-color: #d97706;
}

.multi-state-control:hover {
    transform: scale(1.05);
    border-color: #3b82f6;
}

.multi-state-control.diamond:hover {
    transform: rotate(45deg) scale(1.05);
}

.multi-state-toggle.label-left {
    flex-direction: row-reverse;
}

.multi-state-toggle.label-right {
    flex-direction: row;
}

.multi-state-toggle.label-above {
    flex-direction: column;
}

.multi-state-toggle.label-below {
    flex-direction: column-reverse;
}

.multi-state-label {
    font-size: 0.875rem;
    color: #374151;
    cursor: pointer;
    user-select: none;
}

.multi-state-control[data-color].state-1,
.multi-state-control[data-color].state-2 {
    background-color: var(--element-color, #3b82f6);
    border-color: var(--element-color, #3b82f6);
}

/* Select Group Element Styles */
.select-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin: 0.5rem 0;
}

.select-group-option {
    padding: 0.375rem 0.75rem;
    border: 2px solid #e5e7eb;
    border-radius: 9999px; /* Full rounded for pills */
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    background: white;
    color: #6b7280;
    user-select: none;
    white-space: nowrap;
}

.select-group.style-pills .select-group-option {
    border-radius: 9999px;
}

.select-group.style-tags .select-group-option {
    border-radius: 3px;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 400;
    letter-spacing: 0.025em;
    position: relative;
    padding-left: 0.75rem;
    background: transparent;
    border: none;
    color: #9ca3af;
}

.select-group.style-tags .select-group-option::before {
    content: '#';
    position: absolute;
    left: 0.25rem;
    font-weight: 400;
    opacity: 0.7;
}

.select-group.style-tags .select-group-option:hover:not(.selected) {
    background: transparent;
    color: #6b7280;
}

.select-group.style-tags.theme-default .select-group-option.selected {
    background: transparent;
    border: none;
    color: #3b82f6;
    font-weight: 700;
}

.select-group.style-tags.theme-success .select-group-option.selected {
    background: transparent;
    border: none;
    color: #059669;
    font-weight: 700;
}

.select-group.style-tags.theme-warning .select-group-option.selected {
    background: transparent;
    border: none;
    color: #d97706;
    font-weight: 700;
}

.select-group.style-tags.theme-danger .select-group-option.selected {
    background: transparent;
    border: none;
    color: #dc2626;
    font-weight: 700;
}

.select-group.style-tags.theme-purple .select-group-option.selected {
    background: transparent;
    border: none;
    color: #7c3aed;
    font-weight: 700;
}

.select-group.style-tags .select-group-option.selected:hover {
    background: transparent;
    font-weight: 700;
}

.select-group.style-buttons .select-group-option {
    border-radius: 6px;
    padding: 0.5rem 1rem;
    border-width: 1px;
    font-weight: 500;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.select-group.style-buttons .select-group-option:hover {
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
}

.select-group-option.selected {
    background: #3b82f6;
    border-color: #2563eb;
    color: white;
}

.select-group-option:hover:not(.selected) {
    border-color: #3b82f6;
    background: #eff6ff;
    color: #3b82f6;
}

.select-group-option.selected:hover {
    background: #2563eb;
    border-color: #1d4ed8;
}

.select-group.mode-selected-only .select-group-option:not(.selected) {
    display: none;
}

.select-group.mode-all .select-group-option {
    display: flex;
}

.select-group-add {
    padding: 0.375rem 0.75rem;
    border: 2px dashed #d1d5db;
    border-radius: 9999px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    background: white;
    color: #9ca3af;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.select-group-add:hover {
    border-color: #3b82f6;
    color: #3b82f6;
    background: #eff6ff;
}

.select-group[data-color] .select-group-option.selected {
    background-color: var(--element-color, #3b82f6);
    border-color: var(--element-color, #3b82f6);
}

.select-group[data-color] .select-group-option:hover:not(.selected) {
    border-color: var(--element-color, #3b82f6);
    background-color: var(--element-color-light, #eff6ff);
    color: var(--element-color, #3b82f6);
}

/* Enhanced Combo Element Styles */
.combo-field {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
    transition: all 0.2s ease;
    min-width: 120px;
}

.combo-field:hover {
    border-color: #3b82f6;
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.combo-field.layout-vertical {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.combo-field.layout-horizontal {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    text-align: left;
}

.combo-field.layout-compact {
    padding: 0.5rem;
    min-width: 80px;
}

.combo-field.size-small {
    min-width: 80px;
    padding: 0.75rem;
}

.combo-field.size-medium {
    min-width: 120px;
    padding: 1rem;
}

.combo-field.size-large {
    min-width: 160px;
    padding: 1.25rem;
}

.combo-label {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #374151;
    margin-bottom: 0.5rem;
}

.combo-field.layout-horizontal .combo-label {
    margin-bottom: 0;
    margin-right: 0.5rem;
}

.combo-score {
    font-size: 1.25rem;
    font-weight: 600;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    padding: 0.5rem;
    text-align: center;
    width: 80px;
    background: white;
}

.combo-field.size-small .combo-score {
    font-size: 1rem;
    width: 60px;
    padding: 0.375rem;
}

.combo-field.size-large .combo-score {
    font-size: 1.5rem;
    width: 100px;
    padding: 0.625rem;
}

.combo-modifier {
    font-size: 0.875rem;
    font-weight: 600;
    background: #f3f4f6 !important;
    border: 1px solid #e5e7eb !important;
    border-radius: 4px;
    padding: 0.25rem 0.5rem;
    color: #6b7280 !important;
    text-align: center;
    width: 50px;
    margin-top: 0.5rem;
}

.combo-field.layout-horizontal .combo-modifier {
    margin-top: 0;
    margin-left: 0.5rem;
}

.combo-field.size-small .combo-modifier {
    font-size: 0.75rem;
    width: 40px;
    padding: 0.2rem 0.375rem;
}

.combo-field.size-large .combo-modifier {
    font-size: 1rem;
    width: 60px;
    padding: 0.375rem 0.625rem;
}

.combo-field[data-color] {
    border-color: var(--element-color, #e5e7eb);
}

.combo-field[data-color]:hover {
    border-color: var(--element-color-dark, #3b82f6);
}

@media (max-width: 768px) {
    .select-group {
        gap: 0.25rem;
    }
    
    .select-group-option {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
    
    .combo-field {
        min-width: 100px;
        padding: 0.75rem;
    }
    
    .combo-score {
        width: 60px;
        font-size: 1rem;
    }
    
    .combo-modifier {
        width: 40px;
        font-size: 0.75rem;
    }
}

.multi-state-toggle.loading .multi-state-control::after,
.select-group.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    border: 2px solid #e5e7eb;
    border-radius: 50%;
    border-top-color: #3b82f6;
    animation: spin 1s ease-in-out infinite;
}

/* Collapsible Group Styles */
.collapsible-group {
    transition: all 0.3s ease;
}

.collapsible-legend {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: color 0.2s ease;
}

.collapsible-legend:hover {
    color: #3b82f6;
}

.collapse-icon {
    font-size: 0.875rem;
    transition: transform 0.2s ease;
    display: inline-block;
    width: 1rem;
    text-align: center;
}

.collapse-icon.collapsed {
    transform: rotate(0deg);
}

.group-content {
    overflow: hidden;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    max-height: 1000px;
    opacity: 1;
}

.group-content.collapsed {
    max-height: 0;
    opacity: 0;
    margin: 0;
    padding: 0;
}

/* Color Picker Styles */
.color-picker-container {
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 0.75rem;
    background: #f8fafc;
}

.color-presets {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.color-preset {
    width: 2rem;
    height: 2rem;
    border-radius: 4px;
    cursor: pointer;
    border: 2px solid #e5e7eb;
    transition: all 0.2s ease;
    position: relative;
}

.color-preset:hover {
    transform: scale(1.1);
    border-color: #3b82f6;
}

.color-preset.selected {
    border-color: #3b82f6;
    border-width: 3px;
}

.color-preset.selected::after {
    content: 'âœ“';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-weight: bold;
    font-size: 0.75rem;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);
}

.custom-color-section {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px solid #e5e7eb;
}

.custom-color-input {
    width: 3rem;
    height: 2rem;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    cursor: pointer;
    padding: 0;
}

.custom-color-input::-webkit-color-swatch-wrapper {
    padding: 0;
}

.custom-color-input::-webkit-color-swatch {
    border: none;
    border-radius: 4px;
}

.color-picker-button {
    width: 1.5rem;
    height: 1.5rem;
    border: 1px solid #d1d5db;
    border-radius: 3px;
    cursor: pointer;
    background: #f9fafb;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
}

.color-picker-button:hover {
    background: #f3f4f6;
    border-color: #3b82f6;
    transform: scale(1.05);
}

.color-input-hidden {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}

.color-picker-icon {
    font-size: 0.75rem;
    pointer-events: none;
}

.preview-info {
    font-size: 0.75rem;
    color: #9ca3af;
    margin-top: 0.5rem;
    font-style: italic;
    text-align: center;
    padding: 0.25rem 0.5rem;
    background: #f8fafc;
    border-radius: 3px;
    border: 1px solid #e5e7eb;
}

.combo-field[style*="color:"] * {
    color: inherit !important;
}

.combo-field[style*="color:"] .combo-label,
.combo-field[style*="color:"] .combo-score,
.combo-field[style*="color:"] .combo-modifier {
    color: inherit !important;
}

.combo-label[style*="color:"],
.combo-score[style*="color:"],
.combo-modifier[style*="color:"] {
    color: inherit !important;
}

.group-fieldset[style*="background-color"] {
    transition: background-color 0.2s ease;
}

.form-element[style*="background-color"] {
    transition: background-color 0.2s ease;
}

.form-element[style*="border-color"] {
    transition: border-color 0.2s ease;
}

.group-fieldset[style*="background-color"]:hover {
    filter: brightness(0.95);
}

.form-element[style*="background-color"]:hover {
    filter: brightness(0.98);
}

/* Tools Pane Styling */
.tools-content {
    overflow-x: hidden;
}

.tool-section {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #e5e7eb;
}

.tool-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.tool-section-title {
    margin: 0 0 0.75rem 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.tool-description {
    font-size: 0.75rem;
    color: #6b7280;
    margin: 0.5rem 0 0 0;
    line-height: 1.4;
}

.tool-note {
    background: #f8fafc;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 0.5rem;
}

.tool-note small {
    color: #6b7280;
    font-size: 0.75rem;
    line-height: 1.3;
}

.undo-redo-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.undo-redo-controls .btn {
    justify-content: flex-start;
    text-align: left;
}

.palette-content {
    border-bottom: 1px solid #e5e7eb;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}

.palette-content .element-group:last-child {
    margin-bottom: 0;
}

.future-tools {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.future-tool {
    padding: 0.5rem;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.875rem;
    color: #6b7280;
    text-align: center;
    opacity: 0.7;
}

/* Ensure left pane shows by default on desktop */
@media (min-width: 1024px) {
    .character-editor-container {
        grid-template-columns: 300px 1fr 350px;
    }
    
    .character-editor-container.left-collapsed {
        grid-template-columns: 0 1fr 350px;
    }
}

/* Formula Input Styling */
.formula-input-container {
    position: relative;
}

.formula-input {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
}

.field-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
}

.field-suggestion {
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    border-bottom: 1px solid #f3f4f6;
    font-size: 0.875rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

.field-suggestion:hover {
    background-color: #f9fafb;
}

.field-suggestion:last-child {
    border-bottom: none;
}

.formula-error {
    color: #dc2626;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.formula-preview {
    color: #059669;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.formula-preview code {
    background: #f0f9ff;
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

/* Enhanced Group Styles */
.group-style-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.group-style-subtle {
    background: #f8fafc;
    border-radius: 6px;
    padding: 0.75rem;
}

.combo-row-layout {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.combo-compact-layout {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    text-align: center;
    min-width: 80px;
}

.combo-row-layout .field-group,
.combo-compact-layout .field-group {
    margin: 0;
    flex-shrink: 0;
}

.combo-row-layout .field-label,
.combo-compact-layout .field-label {
    margin-bottom: 0.25rem;
    font-size: 0.875rem;
}

.combo-compact-layout .field-label {
    font-size: 0.75rem;
}

.group-gap-none {
    gap: 0;
}

.group-gap-small {
    gap: 0.5rem;
}

.group-gap-medium {
    gap: 1rem;
}

.group-gap-large {
    gap: 1.5rem;
}

/* Group column layouts */
.group-columns-layout {
    display: grid;
    align-items: start;
}

.group-columns-2 {
    grid-template-columns: 1fr 1fr;
}

.group-columns-3 {
    grid-template-columns: 1fr 1fr 1fr;
}

.group-columns-4 {
    grid-template-columns: 1fr 1fr 1fr 1fr;
}

.combo-row-layout.group-gap-none { gap: 0.25rem; }
.combo-row-layout.group-gap-small { gap: 0.5rem; }
.combo-row-layout.group-gap-medium { gap: 0.75rem; }
.combo-row-layout.group-gap-large { gap: 1rem; }

.combo-compact-layout.group-gap-none { gap: 0.125rem; }
.combo-compact-layout.group-gap-small { gap: 0.25rem; }
.combo-compact-layout.group-gap-medium { gap: 0.375rem; }
.combo-compact-layout.group-gap-large { gap: 0.5rem; }

.scope-indicator {
    position: absolute;
    top: -8px;
    left: 8px;
    background: #6b7280;
    color: white;
    font-size: 0.625rem;
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
    font-weight: 500;
    z-index: 10;
    opacity: 1;
    transition: all 0.2s ease;
    max-width: 120px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.scope-indicator:hover {
    max-width: 300px;
    background: #374151;
    z-index: 20;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transform: translateX(-2px);
}

.form-element.selected .scope-indicator:hover {
    background: #374151;
}

.scope-indicator::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 8px;
    height: 100%;
    background: linear-gradient(to right, transparent, #6b7280);
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
}

.field-group.has-border,
.canvas-element .field-group.has-border,
.drop-zone.group-drop-zone.has-border {
    border: 2px solid currentColor; /* Will use the border-color from inline style */
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.field-group.has-background,
.canvas-element .field-group.has-background {
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

/* Dashed border for template editor drop zones */
.drop-zone.group-drop-zone.has-border {
    border-style: dashed;
}

.alignment-presets {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.alignment-presets .btn {
    font-size: 0.75rem;
    padding: 0.375rem 0.5rem;
    text-align: center;
    justify-content: center;
}

.alignment-presets .btn:hover {
    transform: translateY(-1px);
}

.property-group.appearance-group + .property-group.appearance-group {
    margin-top: 0;
    border-top: 1px solid #e5e7eb;
    padding-top: 1rem;
}

.input-align-center .form-control {
    margin-left: auto;
    margin-right: auto;
    display: block;
}

.input-align-right .form-control {
    margin-left: auto;
    margin-right: 0;
    display: block;
}

.input-align-left {
    margin-left: 0;
    margin-right: auto;
    display: block;
}

.text-align-center.form-control,
.form-control.text-align-center {
    text-align: center !important;
}

.text-align-right.form-control,
.form-control.text-align-right {
    text-align: right !important;
}

/* Special handling for select dropdowns */
select.form-control.text-align-center {
    text-align-last: center;
}

select.form-control.text-align-right {
    text-align-last: right;
}

.group-label {
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.75rem;
    text-align: left; /* default */
}

.group-label.group-label-align-center {
    text-align: center;
}

.group-label.group-label-align-right {
    text-align: right;
}

.group-content-align-center {
    text-align: center;
}

.group-content-align-center > * {
    margin-left: auto;
    margin-right: auto;
}

.group-content-align-right {
    text-align: right;
}

.group-content-align-right > * {
    margin-left: auto;
    margin-right: 0;
}

.group-content-align-center.horizontal-layout,
.group-content-align-center.combo-row-layout {
    justify-content: center;
}

.group-content-align-right.horizontal-layout,
.group-content-align-right.combo-row-layout {
    justify-content: flex-end;
}

/* Grid layouts with content alignment */
.group-content-align-center.grid-layout {
    justify-items: center;
}

.group-content-align-right.grid-layout {
    justify-items: end;
}

/* Text Size Classes */
.text-size-small {
    font-size: 0.75rem !important;
    padding: 0.25rem 0.5rem !important;
    min-height: 1.75rem !important;
}

.text-size-medium {
    font-size: 0.875rem !important;
    padding: 0.375rem 0.75rem !important;
    min-height: 2.25rem !important;
}

.text-size-large {
    font-size: 1.125rem !important;
    padding: 0.5rem 1rem !important;
    min-height: 2.75rem !important;
}

.text-size-xlarge {
    font-size: 1.5rem !important;
    padding: 0.75rem 1.25rem !important;
    min-height: 3.5rem !important;
}

textarea.text-size-small {
    min-height: 3rem !important;
}

textarea.text-size-large {
    min-height: 4rem !important;
}

textarea.text-size-xlarge {
    min-height: 5rem !important;
}

.field-label.text-size-small {
    font-size: 0.75rem !important;
}

.field-label.text-size-large {
    font-size: 1.125rem !important;
    font-weight: 600 !important;
}

.field-label.text-size-xlarge {
    font-size: 1.5rem !important;
    font-weight: 600 !important;
}

.text-bold {
    font-weight: bold !important;
}

.text-italic {
    font-style: italic !important;
}

.text-underline {
    text-decoration: underline !important;
}

.button-toggle-group {
    display: flex;
    gap: 0.25rem;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 0.25rem;
    background: #f8fafc;
    width: fit-content;
}

.button-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border: 1px solid transparent;
    border-radius: 4px;
    background: transparent;
    color: #6b7280;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.button-toggle:hover {
    background: #e5e7eb;
    color: #374151;
    border-color: #d1d5db;
}

.button-toggle.active {
    background: #3b82f6;
    color: white;
    border-color: #2563eb;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.button-toggle.active:hover {
    background: #2563eb;
    border-color: #1d4ed8;
}

.button-toggle strong {
    font-weight: 700;
}

.button-toggle em {
    font-style: italic;
}

.button-toggle u {
    text-decoration: underline;
}

/* SortableJS Styles */
.sortable-ghost {
    opacity: 0.4;
    background: #e3f2fd;
    border: 2px dashed #2196f3;
    border-radius: 4px;
}

.sortable-chosen {
    opacity: 0.8;
}

.sortable-drag {
    opacity: 0.6;
    transform: rotate(5deg);
}

.drop-zone {
    transition: all 0.2s ease;
}

.drop-zone:empty {
    min-height: 60px;
    border: 2px dashed #d1d5db;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.drop-zone:empty::after {
    content: "Drop elements here";
    color: #6b7280;
    font-style: italic;
}

.canvas-element {
    cursor: move;
}

.canvas-element:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}